name: Secrets and Variables Demo

on:
  workflow_dispatch:  # Manual trigger only

env:
  WORKFLOW_LEVEL_VAR: "I am defined in the workflow file"

jobs:
  demo-secrets:
    name: Demonstrate Secrets & Variables
    runs-on: ubuntu-latest
    
    env:
      JOB_LEVEL_VAR: "I am defined at job level"
    
    steps:
      - name: Show workflow-level env var
        run: echo "Workflow var: $WORKFLOW_LEVEL_VAR"
      
      - name: Show job-level env var
        run: echo "Job var: $JOB_LEVEL_VAR"
      
      - name: Show step-level env var
        env:
          STEP_LEVEL_VAR: "I am defined at step level"
        run: echo "Step var: $STEP_LEVEL_VAR"
      
      - name: Show repository variable
        run: echo "Deploy environment: ${{ vars.DEPLOY_ENVIRONMENT }}"
      
      - name: Show secret (will be masked!)
        run: echo "Secret message: ${{ secrets.MY_SECRET_MESSAGE }}"
      
      - name: Use secret in a command
        env:
          SECRET_AS_ENV: ${{ secrets.MY_SECRET_MESSAGE }}
        run: |
          echo "The secret is: $SECRET_AS_ENV"
          echo "Secret length: ${#SECRET_AS_ENV} characters"
      
      - name: Show built-in GITHUB_TOKEN
        run: |
          echo "GitHub Token exists: ${{ secrets.GITHUB_TOKEN != '' }}"
          echo "Token preview: ${GITHUB_TOKEN:0:10}..."
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
      
      - name: Show GitHub context variables
        run: |
          echo "Repository: ${{ github.repository }}"
          echo "Actor: ${{ github.actor }}"
          echo "Event: ${{ github.event_name }}"
          echo "Ref: ${{ github.ref }}"
          echo "SHA: ${{ github.sha }}"
